
# TODO: update webapp code
type MolecularDB {
  id: Int!
  name: String!
  version: String!
  default: Boolean!
  # True if database is deprecated/superseded and would not be useful for most users
  hidden: Boolean! @deprecated(reason: "Use archived field instead")
  public: Boolean!
  archived: Boolean!  # Cannot be used for dataset processing
  targeted: Boolean!  # If true keep all annotations regardless of their FDR
  fullName: String
  description: String
  link: String
  citation: String
}

input CreateMolecularDBInput {
  name: String!
  version: String!
  filePath: String!
  groupId: ID!
  fullName: String
  description: String
  link: String
  citation: String  # JSON-based rich text, in a format defined by tiptap (https://tiptap.scrumpy.io/)
}

input UpdateMolecularDBInput {
  archived: Boolean
  fullName: String
  description: String
  link: String
  citation: String  # JSON-based rich text, in a format defined by tiptap (https://tiptap.scrumpy.io/)
}

type Query {
  molecularDatabases(hideArchived: Boolean=true,
    hideDeprecated: Boolean=false @deprecated(reason: "Only hideArchived should be used"),
    onlyLastVersion: Boolean=false @deprecated(reason: "Only hideArchived should be used")): [MolecularDB!]
}

type Mutation {
  createMolecularDB(databaseDetails: CreateMolecularDBInput!): MolecularDB!
  updateMolecularDB(databaseId: Int!, databaseDetails: UpdateMolecularDBInput!): MolecularDB!
  deleteMolecularDB(databaseId: Int!): Boolean!
}

schema {
  query: Query
  mutation: Mutation
  subscription: Subscription
}
